<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Voyager Education Space Academy Training! üöÄ</title>
    <link
      href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      @keyframes float {
        0% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-10px);
        }
        100% {
          transform: translateY(0px);
        }
      }

      @keyframes spin {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }

      @keyframes twinkle {
        0% {
          opacity: 1;
        }
        50% {
          opacity: 0.3;
        }
        100% {
          opacity: 1;
        }
      }

      body {
        font-family: "Quicksand", sans-serif;
        background-color: #1a237e;
        background-image: radial-gradient(circle, #ffffff 1px, transparent 1px),
          radial-gradient(circle, #ffffff 1px, transparent 1px);
        background-size: 50px 50px;
        background-position: 0 0, 25px 25px;
        position: relative;
        overflow-x: hidden;
      }

      .star {
        position: absolute;
        background: white;
        border-radius: 50%;
        animation: twinkle 1s infinite;
      }

      .rocket {
        font-size: 50px;
        animation: float 3s infinite ease-in-out;
        display: inline-block;
        transform-origin: center;
      }

      .title {
        font-family: "Space Grotesk", sans-serif;
        background: linear-gradient(45deg, #00bcd4, #2196f3);
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
        text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.2);
        letter-spacing: 1px;
      }

      .drag-area {
        border: 3px dashed #2196f3;
        background-color: rgba(255, 255, 255, 0.9);
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(33, 150, 243, 0.3);
      }

      .drag-area.active {
        border: 3px solid #2196f3;
        background-color: rgba(33, 150, 243, 0.1);
        transform: scale(1.05);
      }

      .upload-button {
        background: linear-gradient(45deg, #2196f3, #00bcd4);
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
      }

      .upload-button:hover {
        transform: scale(1.1);
        box-shadow: 0 5px 15px rgba(33, 150, 243, 0.4);
      }

      .result-box {
        background: rgba(255, 255, 255, 0.95);
        border-radius: 20px;
        box-shadow: 0 8px 32px rgba(33, 150, 243, 0.2);
        backdrop-filter: blur(8px);
        display: none;
      }

      .prediction-male {
        color: #2196f3;
        font-size: 28px;
        animation: float 2s infinite ease-in-out;
      }

      .prediction-female {
        color: #00bcd4;
        font-size: 28px;
        animation: float 2s infinite ease-in-out;
      }

      .emoji {
        font-size: 60px;
        margin: 10px;
        animation: float 3s infinite ease-in-out;
        display: inline-block;
      }

      .loading-animation {
        display: none;
        font-size: 40px;
        animation: spin 2s linear infinite;
      }

      .success-animation {
        animation: float 1s ease-in-out;
      }

      .fun-message {
        font-size: 20px;
        color: #2196f3;
        margin-top: 10px;
        opacity: 0;
        transition: opacity 0.5s ease;
        font-family: "Quicksand", sans-serif;
        font-weight: 500;
        letter-spacing: 0.5px;
      }

      .fun-message.visible {
        opacity: 1;
      }

      .score-board {
        background: linear-gradient(45deg, #1a237e, #0d47a1);
        border-radius: 15px;
        padding: 20px;
        color: white;
        margin-bottom: 20px;
        text-align: center;
        box-shadow: 0 4px 15px rgba(33, 150, 243, 0.5);
        font-family: "Space Grotesk", sans-serif;
        letter-spacing: 0.5px;
      }

      .badge {
        display: inline-block;
        margin: 5px;
        padding: 10px;
        border-radius: 50%;
        width: 60px;
        height: 60px;
        background: #fff;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        transition: transform 0.3s ease;
      }

      .badge:hover {
        transform: scale(1.1) rotate(10deg);
      }

      .badge.locked {
        filter: grayscale(100%);
        opacity: 0.5;
      }

      .streak-counter {
        font-size: 24px;
        color: #ffd700;
        text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        animation: float 2s infinite ease-in-out;
      }

      .achievement {
        position: fixed;
        top: 20px;
        right: -300px;
        background: linear-gradient(45deg, #ffd700, #ffa000);
        padding: 15px;
        border-radius: 10px;
        color: white;
        font-size: 18px;
        font-family: "Space Grotesk", sans-serif;
        letter-spacing: 0.5px;
        transition: right 0.5s ease;
        z-index: 1000;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
      }

      .achievement.show {
        right: 20px;
      }

      @keyframes celebrate {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.2) rotate(10deg);
        }
        100% {
          transform: scale(1);
        }
      }

      .celebrate {
        animation: celebrate 0.5s ease;
      }

      .quiz-container {
        background: rgba(255, 255, 255, 0.95);
        border-radius: 20px;
        padding: 20px;
        margin-top: 20px;
        box-shadow: 0 8px 32px rgba(33, 150, 243, 0.2);
      }

      .quiz-button {
        background: linear-gradient(45deg, #4caf50, #2196f3);
        color: white;
        padding: 12px 24px;
        border-radius: 30px;
        font-size: 18px;
        cursor: pointer;
        transition: all 0.3s ease;
        margin: 10px;
      }

      .quiz-button:hover {
        transform: scale(1.05);
        box-shadow: 0 5px 15px rgba(33, 150, 243, 0.4);
      }

      .quiz-option {
        background: white;
        border: 2px solid #2196f3;
        border-radius: 15px;
        padding: 15px;
        margin: 10px 0;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .quiz-option:hover {
        background: #e3f2fd;
        transform: translateX(10px);
      }

      .quiz-option.selected {
        background: #2196f3;
        color: white;
      }

      .timer {
        font-size: 24px;
        color: #2196f3;
        margin: 10px 0;
      }

      .speed-badge {
        position: absolute;
        top: -10px;
        right: -10px;
        background: linear-gradient(45deg, #ffd700, #ffa000);
        border-radius: 50%;
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 20px;
        animation: float 2s infinite ease-in-out;
      }

      .speed-rating {
        font-size: 24px;
        font-weight: bold;
        margin: 15px 0;
        text-align: center;
        animation: float 2s infinite ease-in-out;
      }

      .speed-rating.fastest {
        color: #ffd700;
        text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
      }

      .speed-rating.fast {
        color: #2196f3;
      }

      .speed-rating.average {
        color: #4caf50;
      }

      .speed-rating.slow {
        color: #ff9800;
      }

      .speed-rating.retry {
        color: #f44336;
      }

      .next-button {
        background: linear-gradient(45deg, #9c27b0, #673ab7);
        color: white;
        padding: 15px 30px;
        border-radius: 30px;
        font-size: 20px;
        cursor: pointer;
        transition: all 0.3s ease;
        margin: 20px auto;
        display: none;
        text-align: center;
        box-shadow: 0 4px 15px rgba(156, 39, 176, 0.4);
      }

      .next-button:hover {
        transform: scale(1.05);
        box-shadow: 0 6px 20px rgba(156, 39, 176, 0.6);
      }
    </style>
  </head>
  <body class="min-h-screen p-8">
    <div id="stars-container"></div>

    <!-- Achievement notification -->
    <div id="achievement" class="achievement"></div>

    <div class="container mx-auto px-4 py-8">
      <div class="max-w-2xl mx-auto">
        <div class="text-center mb-8">
          <span class="rocket">üöÄ</span>
          <h1 class="text-4xl font-bold text-center mb-4 title">
            Voyager Education Space Academy Training! üéì
          </h1>
          <p class="text-center text-xl mb-4 text-white">
            Train your Python and Pace Science knowledge and earn cosmic badges!
            ‚≠ê
          </p>
        </div>

        <!-- Score Board -->
        <div class="score-board mb-8">
          <div class="flex justify-around items-center">
            <div>
              <h3 class="text-xl mb-2">Cosmic Score</h3>
              <p id="score" class="text-3xl font-bold">0</p>
            </div>
            <div>
              <h3 class="text-xl mb-2">Streak</h3>
              <p id="streak" class="streak-counter">üî• 0</p>
            </div>
            <div>
              <h3 class="text-xl mb-2">Rank</h3>
              <p id="rank" class="text-3xl font-bold">Cadet</p>
            </div>
          </div>

          <!-- Badges -->
          <div class="mt-4">
            <h3 class="text-xl mb-2">Badges</h3>
            <div id="badges" class="flex justify-center gap-2">
              <div class="badge locked" title="First Mission" id="badge-first">
                üéñÔ∏è
              </div>
              <div class="badge locked" title="5 Streak!" id="badge-streak">
                ‚ö°
              </div>
              <div
                class="badge locked"
                title="Master Explorer"
                id="badge-master"
              >
                üëë
              </div>
              <div class="badge locked" title="Speed Champion" id="badge-speed">
                ‚ö°
              </div>
            </div>
          </div>
        </div>

        <div class="result-box p-8">
          <div
            class="drag-area rounded-3xl p-8 text-center cursor-pointer mb-6"
          >
            <div class="flex flex-col items-center">
              <div class="emoji">üì∏</div>
              <p class="text-xl text-blue-600 mb-4">
                Beam up a photo to our space station! üõ∏
              </p>
              <input
                type="file"
                id="file-input"
                class="hidden"
                accept="image/*"
              />
              <button
                onclick="document.getElementById('file-input').click()"
                class="upload-button text-white px-8 py-4 rounded-full text-xl font-bold hover:opacity-90"
              >
                Launch a Photo! üåü
              </button>
            </div>
          </div>

          <div id="loading" class="loading-animation text-center">üõ∏</div>

          <div id="preview" class="hidden mb-6">
            <img
              id="preview-image"
              class="max-w-full h-auto mx-auto rounded-2xl shadow-lg"
              src=""
              alt="Preview"
            />
          </div>

          <div id="result" class="hidden">
            <div class="border-t border-blue-200 pt-6">
              <h3 class="text-2xl font-bold mb-4 text-center text-blue-600">
                üéØ Mission Report! üéØ
              </h3>
              <div class="text-center">
                <p id="prediction-text" class="text-2xl mb-2"></p>
                <p id="confidence-text" class="text-lg text-blue-600"></p>
                <p class="fun-message" id="fun-message"></p>
                <div class="mb-4">
                  <label
                    for="username"
                    class="block text-blue-500 font-bold mb-2"
                    >Enter Your Name:</label
                  >
                  <input
                    type="text"
                    id="username"
                    class="shadow appearance-none border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                    placeholder="Space Cadet Name"
                  />
                </div>
                <button id="next-cadet" class="next-button mt-6">
                  üëæ NEXT CADET üëæ
                </button>
              </div>
            </div>
          </div>

          <div
            id="error"
            class="hidden text-red-500 text-center mt-4 text-xl"
          ></div>
        </div>

        <!-- Quiz Container -->
        <div class="quiz-container" id="quiz-container">
          <h2 class="text-2xl font-bold text-center mb-4 text-blue-600">
            First, Complete Your Space Mission! üöÄ
          </h2>
          <div class="speed-rating" id="speed-rating"></div>
          <div class="timer" id="quiz-timer">Time: 0s</div>
          <div id="quiz-question" class="text-xl mb-4"></div>
          <div id="quiz-options" class="space-y-2"></div>
          <button id="start-quiz" class="quiz-button">Start Mission! üéØ</button>
          <button id="submit-quiz" class="quiz-button" style="display: none">
            Complete Mission! üåü
          </button>
        </div>
      </div>
    </div>

    <script>
      // Create twinkling stars
      function createStars() {
        const container = document.getElementById("stars-container");
        for (let i = 0; i < 50; i++) {
          const star = document.createElement("div");
          star.className = "star";
          star.style.width = Math.random() * 3 + "px";
          star.style.height = star.style.width;
          star.style.left = Math.random() * 100 + "vw";
          star.style.top = Math.random() * 100 + "vh";
          star.style.animationDelay = Math.random() * 2 + "s";
          container.appendChild(star);
        }
      }

      createStars();

      const dragArea = document.querySelector(".drag-area");
      const fileInput = document.querySelector("#file-input");
      const preview = document.querySelector("#preview");
      const previewImage = document.querySelector("#preview-image");
      const result = document.querySelector("#result");
      const predictionText = document.querySelector("#prediction-text");
      const confidenceText = document.querySelector("#confidence-text");
      const errorDiv = document.querySelector("#error");
      const loading = document.querySelector("#loading");
      const funMessage = document.querySelector("#fun-message");

      const funMessages = {
        male: [
          "Houston, we've found a boy! üë®‚ÄçüöÄ",
          "Blast off! It's a space cadet! üöÄ",
          "One small step for AI, one giant leap for boyhood! üåü",
        ],
        female: [
          "Star commander girl detected! üë©‚ÄçüöÄ",
          "A future astronaut princess! ‚≠ê",
          "Space queen spotted! üå†",
        ],
      };

      ["dragenter", "dragover"].forEach((eventName) => {
        dragArea.addEventListener(eventName, (e) => {
          e.preventDefault();
          dragArea.classList.add("active");
        });
      });

      ["dragleave", "drop"].forEach((eventName) => {
        dragArea.addEventListener(eventName, (e) => {
          e.preventDefault();
          dragArea.classList.remove("active");
        });
      });

      dragArea.addEventListener("drop", (e) => {
        e.preventDefault();
        const file = e.dataTransfer.files[0];
        handleFile(file);
      });

      fileInput.addEventListener("change", () => {
        const file = fileInput.files[0];
        handleFile(file);
      });

      // Game state
      let gameState = {
        score: 0,
        streak: 0,
        rank: "Cadet",
        badges: {
          first: false,
          streak: false,
          master: false,
          speed: false,
        },
        startTime: null,
      };

      const ranks = [
        { score: 0, name: "Cadet" },
        { score: 50, name: "Explorer" },
        { score: 100, name: "Commander" },
        { score: 200, name: "Captain" },
        { score: 500, name: "Admiral" },
      ];

      function updateScore(points) {
        gameState.score += points;
        document.getElementById("score").textContent = gameState.score;

        // Update rank
        for (let i = ranks.length - 1; i >= 0; i--) {
          if (gameState.score >= ranks[i].score) {
            const newRank = ranks[i].name;
            if (newRank !== gameState.rank) {
              gameState.rank = newRank;
              document.getElementById("rank").textContent = newRank;
              showAchievement(`Promoted to ${newRank}! üéâ`);
            }
            break;
          }
        }
      }

      function updateStreak(success) {
        if (success) {
          gameState.streak++;
          if (gameState.streak === 5 && !gameState.badges.streak) {
            gameState.badges.streak = true;
            document.getElementById("badge-streak").classList.remove("locked");
            showAchievement("New Badge: Streak Master! ‚ö°");
          }
        } else {
          gameState.streak = 0;
        }
        document.getElementById(
          "streak"
        ).textContent = `üî• ${gameState.streak}`;
      }

      function showAchievement(message) {
        const achievement = document.getElementById("achievement");
        achievement.textContent = message;
        achievement.classList.add("show");
        setTimeout(() => {
          achievement.classList.remove("show");
        }, 3000);
      }

      function handleFile(file) {
        if (file && file.type.startsWith("image/")) {
          gameState.startTime = Date.now();
          const reader = new FileReader();
          reader.onload = () => {
            previewImage.src = reader.result;
            preview.classList.remove("hidden");
            loading.style.display = "block";
            uploadFile(file);
          };
          reader.readAsDataURL(file);
        } else {
          showError("Oops! Our space scanner only works with pictures! üì∏");
        }
      }

      // Quiz Questions
      const quizQuestions = [
        // Python Questions
        {
          question:
            "What will print('Hello' + ' ' + 'World') show in Python? üíª",
          options: ["HelloWorld", "Hello World", "Error", "Nothing"],
          correct: 1,
          explanation:
            "The + operator joins (concatenates) strings together in Python!",
        },
        {
          question: "Which Python operator finds the remainder? üî¢",
          options: ["/", "%", "#", "$"],
          correct: 1,
          explanation:
            "The % (modulo) operator finds the remainder after division!",
        },
        {
          question: "What does len('Space') return in Python? üöÄ",
          options: ["4", "5", "6", "Error"],
          correct: 1,
          explanation:
            "len() counts the number of characters - 'Space' has 5 letters!",
        },
        {
          question: "In Python, what is the result of 3 * 'Hey'? üéÆ",
          options: ["HeyHeyHey", "9", "Error", "Hey3"],
          correct: 0,
          explanation: "In Python, you can multiply a string to repeat it!",
        },
        {
          question: "What type is the value True in Python? ü§î",
          options: ["text", "number", "boolean", "none"],
          correct: 2,
          explanation:
            "True is a boolean value - it can only be True or False!",
        },
        {
          question: "How do you create a list in Python? üìù",
          options: ["(1,2,3)", "{1,2,3}", "[1,2,3]", "<1,2,3>"],
          correct: 2,
          explanation: "Square brackets [] are used to create lists in Python!",
        },
        {
          question: "What does range(3) create in Python? üîÑ",
          options: ["1,2,3", "0,1,2", "1,2", "0,1,2,3"],
          correct: 1,
          explanation:
            "range(3) creates numbers from 0 to 2 (3 numbers total)!",
        },
        {
          question: "Which is the correct way to comment in Python? üí≠",
          options: ["//Comment", "/*Comment*/", "#Comment", "<!--Comment-->"],
          correct: 2,
          explanation: "The # symbol is used for comments in Python!",
        },
        {
          question: "What does print(2 ** 3) show in Python? üî¢",
          options: ["6", "8", "5", "23"],
          correct: 1,
          explanation: "** is the power operator - 2¬≥ equals 8!",
        },
        {
          question: "How do you check if 5 is equal to '5' in Python? ü§î",
          options: ["5 = '5'", "5 == '5'", "5 === '5'", "5 equals '5'"],
          correct: 1,
          explanation:
            "== checks if values are equal, but 5 and '5' are different types!",
        },
        {
          question: "What happens if you add 5 + True in Python? üé≤",
          options: ["Error", "6", "5True", "True5"],
          correct: 1,
          explanation: "True equals 1 in math operations - so 5 + True = 6!",
        },
        {
          question: "Which converts text to uppercase in Python? üì¢",
          options: [".up()", ".uppercase()", ".toUpper()", ".upper()"],
          correct: 3,
          explanation: "The .upper() method makes all letters UPPERCASE!",
        },
        {
          question: "What does 'abc' * 2 create in Python? üéØ",
          options: ["abcabc", "abc2", "a2b2c2", "Error"],
          correct: 0,
          explanation: "Multiplying a string repeats it that many times!",
        },
        {
          question: "How do you check if 'a' is in 'space'? üîç",
          options: [
            "'a' inside 'space'",
            "'a' contains 'space'",
            "'a' in 'space'",
            "contains('a', 'space')",
          ],
          correct: 2,
          explanation:
            "The 'in' keyword checks if something is inside a string or list!",
        },
        {
          question: "What is the value of 10 / 2 in Python? ‚ûó",
          options: ["5.0", "5", "2.5", "Error"],
          correct: 0,
          explanation:
            "Division always returns a float (decimal) number in Python!",
        },
        {
          question: "Which finds the smallest number in a list? üìä",
          options: ["smallest()", "min()", "lowest()", "short()"],
          correct: 1,
          explanation: "min() finds the minimum (smallest) value!",
        },
        {
          question: "What does str(123) do in Python? üîÑ",
          options: [
            "Makes 123 stronger",
            "Converts 123 to text",
            "Counts to 123",
            "Error",
          ],
          correct: 1,
          explanation: "str() converts numbers into text (string) format!",
        },
        {
          question: "How do you join two lists in Python? ‚ûï",
          options: [
            "list1 + list2",
            "list1 & list2",
            "join(list1, list2)",
            "list1.add(list2)",
          ],
          correct: 0,
          explanation: "The + operator combines two lists into one!",
        },
        {
          question: "What does round(3.7) return? üéØ",
          options: ["3", "4", "3.7", "Error"],
          correct: 1,
          explanation: "round() rounds numbers to the nearest whole number!",
        },
        {
          question: "How do you get the first item in list x? üìã",
          options: ["first(x)", "x.1", "x[1]", "x[0]"],
          correct: 3,
          explanation:
            "Lists start counting at 0, so x[0] gets the first item!",
        },
        {
          question: "What type is 3.14 in Python? üî¢",
          options: ["int", "decimal", "float", "number"],
          correct: 2,
          explanation:
            "Numbers with decimal points are called float in Python!",
        },
        {
          question: "How do you make a function in Python? üõ†Ô∏è",
          options: [
            "function name():",
            "def name():",
            "create name():",
            "make name():",
          ],
          correct: 1,
          explanation: "Use 'def' to define a new function!",
        },
        {
          question: "What does 'space'.count('a') do? üîç",
          options: ["Counts letters", "Counts 'a's", "Makes space", "Error"],
          correct: 1,
          explanation: "count() finds how many times 'a' appears in 'space'!",
        },
        {
          question: "Which is correct in Python? üéØ",
          options: ["if x = 5:", "if x == 5:", "if x === 5:", "if x equals 5:"],
          correct: 1,
          explanation: "Use == to check if values are equal in conditions!",
        },
        {
          question: "What does list(range(2)) create? üìù",
          options: ["[1,2]", "[0,1]", "[0,1,2]", "[1]"],
          correct: 1,
          explanation: "Creates a list with numbers 0 and 1!",
        },
        {
          question: "How do you get the type of 5 in Python? ü§î",
          options: ["typeof(5)", "type(5)", "5.type()", "what_is(5)"],
          correct: 1,
          explanation: "type() tells you what kind of value something is!",
        },
        {
          question: "What is 'Hi'.lower() in Python? üìù",
          options: ["HI", "hi", "Hi", "ERROR"],
          correct: 1,
          explanation: "lower() makes all letters lowercase!",
        },
        {
          question: "How do you remove spaces from text ends? ‚úÇÔ∏è",
          options: [".clean()", ".trim()", ".strip()", ".cut()"],
          correct: 2,
          explanation: "strip() removes spaces from both ends of text!",
        },
        {
          question: "What does bool(0) return in Python? üé≤",
          options: ["0", "1", "True", "False"],
          correct: 3,
          explanation: "Zero converts to False in boolean values!",
        },
        {
          question: "How to check string length in Python? üìè",
          options: [
            "string.length",
            "length(string)",
            "len(string)",
            "string.size()",
          ],
          correct: 2,
          explanation: "len() tells you how many characters are in text!",
        },
        {
          question: "What does max([1,5,2,8,3]) return? üéØ",
          options: ["1", "5", "8", "3"],
          correct: 2,
          explanation: "max() finds the biggest number in a list!",
        },
        {
          question: "How to convert '5' to a number? üî¢",
          options: ["number('5')", "int('5')", "to_number('5')", "5()"],
          correct: 1,
          explanation: "int() converts text to a whole number!",
        },
        {
          question: "What is 'abc'[1] in Python? üéØ",
          options: ["a", "b", "c", "abc"],
          correct: 1,
          explanation:
            "This gets the second letter because counting starts at 0!",
        },
        {
          question: "How do you check if x > 5 and y < 10? ü§î",
          options: [
            "x > 5 && y < 10",
            "x > 5 and y < 10",
            "x > 5 + y < 10",
            "and(x > 5, y < 10)",
          ],
          correct: 1,
          explanation: "Use 'and' to check if both conditions are true!",
        },
        {
          question: "What does sorted([3,1,4]) return? üìä",
          options: ["[1,3,4]", "[4,3,1]", "[3,1,4]", "Error"],
          correct: 0,
          explanation: "sorted() arranges numbers from smallest to largest!",
        },

        // Space Science Questions
        {
          question: "What is the closest planet to the Sun? üåû",
          options: ["Venus", "Earth", "Mars", "Mercury"],
          correct: 3,
          explanation: "Mercury is the first planet from the Sun!",
        },
        {
          question: "What causes the phases of the Moon? üåô",
          options: [
            "Earth's shadow",
            "Sun's position",
            "Moon's rotation",
            "Cloud cover",
          ],
          correct: 1,
          explanation: "We see different parts of the Moon lit by the Sun!",
        },
        {
          question: "What is the largest planet? üåç",
          options: ["Mars", "Saturn", "Jupiter", "Neptune"],
          correct: 2,
          explanation: "Jupiter is the biggest planet in our solar system!",
        },
        {
          question: "What is a shooting star really? ‚≠ê",
          options: ["A star", "A meteor", "A planet", "A satellite"],
          correct: 1,
          explanation:
            "Shooting stars are meteors burning up in our atmosphere!",
        },
        {
          question: "What is the Sun made of? üåû",
          options: ["Rock", "Liquid", "Gas", "Metal"],
          correct: 2,
          explanation: "The Sun is a giant ball of super-hot gases!",
        },
        {
          question: "Which planet has the most moons? üåô",
          options: ["Jupiter", "Saturn", "Uranus", "Neptune"],
          correct: 0,
          explanation: "Jupiter has at least 79 moons!",
        },
        {
          question: "What causes day and night? üåì",
          options: [
            "Moon rotation",
            "Earth's orbit",
            "Earth's rotation",
            "Sun's movement",
          ],
          correct: 2,
          explanation: "Earth spinning on its axis causes day and night!",
        },
        {
          question: "What is the Milky Way? üåå",
          options: ["A star", "A planet", "A galaxy", "A nebula"],
          correct: 2,
          explanation:
            "The Milky Way is our home galaxy with billions of stars!",
        },
        {
          question: "What is a black hole? üï≥Ô∏è",
          options: ["Dead star", "Empty space", "Dark cloud", "Giant planet"],
          correct: 0,
          explanation: "A black hole forms when a massive star dies!",
        },
        {
          question: "What is an asteroid? ‚òÑÔ∏è",
          options: ["Ice ball", "Space rock", "Gas cloud", "Dead star"],
          correct: 1,
          explanation: "Asteroids are rocks floating in space!",
        },
        {
          question: "What color is Mars? üî¥",
          options: ["Blue", "Green", "Red", "Yellow"],
          correct: 2,
          explanation:
            "Mars appears red due to iron oxide (rust) on its surface!",
        },
        {
          question: "What is a comet made of? ‚òÑÔ∏è",
          options: ["Rock and ice", "Pure ice", "Pure rock", "Metal"],
          correct: 0,
          explanation: "Comets are 'dirty snowballs' of rock and ice!",
        },
        {
          question: "What is the hottest planet? üå°Ô∏è",
          options: ["Mercury", "Venus", "Mars", "Jupiter"],
          correct: 1,
          explanation:
            "Venus is hotter than Mercury due to its thick atmosphere!",
        },
        {
          question: "What causes seasons on Earth? üåç",
          options: [
            "Distance from Sun",
            "Earth's tilt",
            "Moon's position",
            "Wind patterns",
          ],
          correct: 1,
          explanation:
            "Earth's tilted axis causes seasons as we orbit the Sun!",
        },
        {
          question: "What is a nebula? üåå",
          options: [
            "Dead star",
            "Cloud of gas",
            "Type of planet",
            "Small moon",
          ],
          correct: 1,
          explanation: "A nebula is a giant cloud of gas and dust in space!",
        },
        {
          question: "What is the ISS? üõ∏",
          options: ["Satellite", "Space station", "Rocket", "Telescope"],
          correct: 1,
          explanation: "The International Space Station is a space laboratory!",
        },
        {
          question: "What is a light year? üí´",
          options: ["Time unit", "Distance unit", "Speed unit", "Star type"],
          correct: 1,
          explanation: "A light year is how far light travels in one year!",
        },
        {
          question: "What causes solar eclipses? üåë",
          options: [
            "Earth's shadow",
            "Moon's shadow",
            "Sun's rotation",
            "Clouds",
          ],
          correct: 1,
          explanation:
            "The Moon blocks our view of the Sun during a solar eclipse!",
        },
        {
          question: "What is the Sun's core temperature? üå°Ô∏è",
          options: ["1,000¬∞C", "100,000¬∞C", "15,000,000¬∞C", "1,000,000¬∞C"],
          correct: 2,
          explanation: "The Sun's core is about 15 million degrees Celsius!",
        },
        {
          question: "What is Saturn known for? ü™ê",
          options: ["Red spot", "Rings", "Blue color", "Size"],
          correct: 1,
          explanation: "Saturn is famous for its beautiful ring system!",
        },
        {
          question: "What is a constellation? ‚≠ê",
          options: [
            "Star cluster",
            "Star pattern",
            "Galaxy type",
            "Planet group",
          ],
          correct: 1,
          explanation: "Constellations are patterns of stars in the night sky!",
        },
        {
          question: "What causes tides on Earth? üåä",
          options: ["Wind", "Moon's gravity", "Sun's heat", "Earth's rotation"],
          correct: 1,
          explanation: "The Moon's gravity pulls on Earth's oceans!",
        },
        {
          question: "What is the aurora borealis? üåà",
          options: ["Solar wind", "Northern Lights", "Comet tail", "Star type"],
          correct: 1,
          explanation: "The Northern Lights are caused by solar particles!",
        },
        {
          question: "What is a dwarf planet? üåç",
          options: ["Small moon", "Tiny star", "Mini planet", "Large asteroid"],
          correct: 2,
          explanation: "A dwarf planet is smaller than regular planets!",
        },
        {
          question: "What is the biggest moon? üåô",
          options: ["Titan", "Europa", "Ganymede", "Io"],
          correct: 2,
          explanation:
            "Ganymede, Jupiter's moon, is the largest in our solar system!",
        },
        {
          question: "What is a meteorite? ‚òÑÔ∏è",
          options: [
            "Space rock on Earth",
            "Falling star",
            "Comet piece",
            "Moon rock",
          ],
          correct: 0,
          explanation: "A meteorite is a space rock that lands on Earth!",
        },
        {
          question: "What causes Mars' red color? üî¥",
          options: ["Heat", "Rust", "Reflection", "Atmosphere"],
          correct: 1,
          explanation: "Iron oxide (rust) makes Mars appear red!",
        },
        {
          question: "What is the coldest planet? ‚ùÑÔ∏è",
          options: ["Neptune", "Uranus", "Pluto", "Mars"],
          correct: 0,
          explanation: "Neptune is the coldest planet in our solar system!",
        },
        {
          question: "What is a pulsar? ‚ö°",
          options: ["Dead star", "Spinning star", "New star", "Exploding star"],
          correct: 1,
          explanation: "A pulsar is a rapidly spinning neutron star!",
        },
        {
          question: "What causes meteor showers? üå†",
          options: ["Moon dust", "Comet debris", "Star pieces", "Planet dust"],
          correct: 1,
          explanation:
            "We see meteor showers when Earth passes through comet debris!",
        },
        {
          question: "What is the Sun's surface called? üåû",
          options: ["Corona", "Photosphere", "Atmosphere", "Core"],
          correct: 1,
          explanation: "The Sun's visible surface is called the photosphere!",
        },
        {
          question: "What is a lunar eclipse? üåë",
          options: ["Moon shadow", "Earth shadow", "Sun shadow", "Star shadow"],
          correct: 1,
          explanation:
            "A lunar eclipse happens when Earth's shadow falls on the Moon!",
        },
        {
          question: "What is the asteroid belt? üå†",
          options: ["Star ring", "Rock zone", "Gas cloud", "Planet ring"],
          correct: 1,
          explanation:
            "The asteroid belt is a zone of rocks between Mars and Jupiter!",
        },
        {
          question: "What causes sunspots? üåû",
          options: [
            "Heat spots",
            "Magnetic fields",
            "Gas bubbles",
            "Surface holes",
          ],
          correct: 1,
          explanation: "Sunspots are caused by intense magnetic activity!",
        },
        {
          question: "What is a galaxy cluster? üåå",
          options: [
            "Star group",
            "Planet group",
            "Galaxy group",
            "Comet group",
          ],
          correct: 2,
          explanation:
            "A galaxy cluster is a group of galaxies held together by gravity!",
        },
      ];

      let quizState = {
        currentQuestion: null,
        startTime: null,
        times: [],
        correctAnswers: 0,
        selectedOption: null,
        timerInterval: null,
        lastQuizTime: null,
        speedRating: null,
      };

      function getSpeedRating(time) {
        if (time <= 5)
          return {
            rating: "fastest",
            text: "Fastest Space Cadet",
            points: 50,
            emoji: "‚ö°",
          };
        if (time <= 10)
          return {
            rating: "fast",
            text: "Quick Space Explorer",
            points: 40,
            emoji: "üöÄ",
          };
        if (time <= 20)
          return {
            rating: "average",
            text: "Space Voyager",
            points: 30,
            emoji: "üåü",
          };
        if (time <= 30)
          return {
            rating: "slow",
            text: "Space Rookie",
            points: 20,
            emoji: "üå†",
          };
        return {
          rating: "retry",
          text: "Space Trainee",
          points: 10,
          emoji: "üéØ",
        };
      }

      function showQuiz() {
        const quizContainer = document.getElementById("quiz-container");
        document.querySelector(".result-box").style.display = "none";
        quizContainer.style.display = "block";
        selectRandomQuestion();
      }

      function selectRandomQuestion() {
        const availableQuestions = quizQuestions.filter(
          (q) => !quizState.times.some((t) => t.question === q.question)
        );

        if (availableQuestions.length === 0) {
          endQuiz();
          return;
        }

        quizState.currentQuestion =
          availableQuestions[
            Math.floor(Math.random() * availableQuestions.length)
          ];

        document.getElementById("quiz-question").textContent =
          quizState.currentQuestion.question;
        const optionsContainer = document.getElementById("quiz-options");
        optionsContainer.innerHTML = "";

        quizState.currentQuestion.options.forEach((option, index) => {
          const optionDiv = document.createElement("div");
          optionDiv.className = "quiz-option";
          optionDiv.textContent = option;
          optionDiv.onclick = () => selectOption(index);
          optionsContainer.appendChild(optionDiv);
        });
      }

      function selectOption(index) {
        quizState.selectedOption = index;
        document.querySelectorAll(".quiz-option").forEach((option, i) => {
          option.classList.toggle("selected", i === index);
        });
      }

      function startQuizTimer() {
        document.getElementById("start-quiz").style.display = "none";
        document.getElementById("submit-quiz").style.display = "block";
        quizState.startTime = Date.now();
        quizState.timerInterval = setInterval(updateTimer, 100);
      }

      function updateTimer() {
        const timeElapsed = (Date.now() - quizState.startTime) / 1000;
        document.getElementById(
          "quiz-timer"
        ).textContent = `Time: ${timeElapsed.toFixed(1)}s`;
      }

      function submitQuizAnswer() {
        clearInterval(quizState.timerInterval);
        const timeTaken = (Date.now() - quizState.startTime) / 1000;
        quizState.lastQuizTime = timeTaken;

        const speedRating = getSpeedRating(timeTaken);
        quizState.speedRating = speedRating;

        const isCorrect =
          quizState.selectedOption === quizState.currentQuestion.correct;
        quizState.times.push({
          question: quizState.currentQuestion.question,
          time: timeTaken,
          correct: isCorrect,
        });

        const speedRatingDiv = document.getElementById("speed-rating");
        speedRatingDiv.textContent = `${speedRating.emoji} ${
          speedRating.text
        } - ${timeTaken.toFixed(1)}s ${speedRating.emoji}`;
        speedRatingDiv.className = `speed-rating ${speedRating.rating}`;

        if (isCorrect) {
          quizState.correctAnswers++;

          // Update streak for correct answer
          updateStreak(true);

          // Update score based on speed rating
          updateScore(speedRating.points);

          // Show achievement with speed rating
          showAchievement(
            `${speedRating.text}! ${quizState.currentQuestion.explanation} ‚≠ê`
          );

          // Check for streak badge
          if (gameState.streak >= 5 && !gameState.badges.streak) {
            gameState.badges.streak = true;
            document.getElementById("badge-streak").classList.remove("locked");
            showAchievement("New Badge: Streak Master! ‚ö°");
          }

          // Show the photo upload section after correct answer
          document.querySelector(".result-box").style.display = "block";
          document.getElementById("quiz-container").style.display = "none";
        } else {
          // Reset streak for wrong answer
          updateStreak(false);

          showAchievement(
            `Keep trying! ${quizState.currentQuestion.explanation} üìö`
          );
          // Reset for another attempt
          document.getElementById("start-quiz").style.display = "block";
          document.getElementById("submit-quiz").style.display = "none";
          document.getElementById("quiz-timer").textContent = "Time: 0s";
          selectRandomQuestion();
        }
      }

      function endQuiz() {
        const fastestTime = Math.min(
          ...quizState.times.filter((t) => t.correct).map((t) => t.time)
        );
        const accuracy =
          (quizState.correctAnswers / quizState.times.length) * 100;

        if (accuracy >= 60) {
          showAchievement(`Quiz Complete! You're a Space Genius! üéì`);
          updateScore(50);
        }

        document.getElementById("quiz-container").style.display = "none";
      }

      function resetForNextStudent() {
        // Get the username from the input field
        const username = document.getElementById("username").value;

        // Send score to leaderboard if username is provided
        if (username && username.trim() !== "") {
          // Send the score to the leaderboard API
          fetch("/quiz_result", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({
              username: username,
              score: gameState.score,
            }),
          })
            .then((response) => response.json())
            .then((data) => {
              console.log("Success:", data);
              showAchievement(`${username} added to the leaderboard! üèÜ`);

              // Redirect to leaderboard after a short delay
              setTimeout(() => {
                window.location.href = "/leaderboard";
              }, 2000);
            })
            .catch((error) => {
              console.error("Error:", error);
              showAchievement("Error adding to leaderboard. Try again!");
            });
        } else {
          showAchievement("Please enter your name to join the leaderboard!");
          return; // Don't reset if no username
        }

        // Reset game state
        gameState = {
          score: 0,
          streak: 0,
          rank: "Cadet",
          badges: {
            first: false,
            streak: false,
            master: false,
            speed: false,
          },
          startTime: null,
        };

        // Reset quiz state
        quizState = {
          currentQuestion: null,
          startTime: null,
          times: [],
          correctAnswers: 0,
          selectedOption: null,
          timerInterval: null,
          lastQuizTime: null,
          speedRating: null,
        };

        // Reset UI elements
        document.getElementById("score").textContent = "0";
        document.getElementById("streak").textContent = "üî• 0";
        document.getElementById("rank").textContent = "Cadet";
        document.getElementById("speed-rating").textContent = "";
        document.getElementById("quiz-timer").textContent = "Time: 0s";
        document.getElementById("username").value = ""; // Clear username field

        // Reset badges
        document.querySelectorAll(".badge").forEach((badge) => {
          badge.classList.add("locked");
        });

        // Clear preview and results
        preview.classList.add("hidden");
        result.classList.add("hidden");
        previewImage.src = "";
        document.querySelector(".fun-message").classList.remove("visible");

        // Hide next button
        document.getElementById("next-cadet").style.display = "none";

        // Show quiz for next student
        showQuiz();
      }

      // Add event listener for next cadet button
      document
        .getElementById("next-cadet")
        .addEventListener("click", resetForNextStudent);

      // Modify uploadFile function to show next button
      function uploadFile(file) {
        const formData = new FormData();
        formData.append("file", file);

        fetch("/predict", {
          method: "POST",
          body: formData,
        })
          .then((response) => response.json())
          .then((data) => {
            loading.style.display = "none";
            if (data.error) {
              showError(data.error);
              updateStreak(false);
            } else {
              result.classList.remove("hidden");
              const emoji = data.prediction === "Female" ? "üë©‚ÄçüöÄ" : "üë®‚ÄçüöÄ";
              const predictionClass =
                data.prediction === "Female"
                  ? "prediction-female"
                  : "prediction-male";
              predictionText.className = predictionClass;

              // Use the quiz performance for the title
              const speedRating = quizState.speedRating;
              let title = `${emoji} ${speedRating.text} ${data.prediction}`;
              title += ` ${speedRating.emoji}`;

              predictionText.textContent = title;
              confidenceText.textContent = `Mission Time: ${quizState.lastQuizTime.toFixed(
                1
              )}s | Points: +${speedRating.points}! üéØ`;

              // Show the next cadet button
              document.getElementById("next-cadet").style.display = "block";

              // Show fun message
              const messages =
                data.prediction.toLowerCase() === "female"
                  ? funMessages.female
                  : funMessages.male;
              funMessage.textContent =
                messages[Math.floor(Math.random() * messages.length)];
              funMessage.classList.add("visible");

              // Calculate total points from both quiz and photo prediction
              const quizPoints = speedRating.points;
              const confidencePoints = Math.round(
                parseFloat(data.confidence) * 10
              );
              const totalPoints = quizPoints + confidencePoints;

              // Update score with combined points
              updateScore(totalPoints);

              // Update streak for successful completion
              updateStreak(true);

              // Show achievement for points earned
              showAchievement(`Mission Complete! +${totalPoints} Points! üåü`);

              // Handle badges
              if (!gameState.badges.first) {
                gameState.badges.first = true;
                document
                  .getElementById("badge-first")
                  .classList.remove("locked");
                showAchievement("First Mission Complete! üéñÔ∏è");
              }

              if (speedRating.rating === "fastest" && !gameState.badges.speed) {
                gameState.badges.speed = true;
                document
                  .getElementById("badge-speed")
                  .classList.remove("locked");
                showAchievement("New Badge: Speed Champion! ‚ö°");
              }

              if (gameState.score >= 200 && !gameState.badges.master) {
                gameState.badges.master = true;
                document
                  .getElementById("badge-master")
                  .classList.remove("locked");
                showAchievement("New Badge: Master Explorer! üëë");
              }

              errorDiv.classList.add("hidden");
            }
          })
          .catch((error) => {
            loading.style.display = "none";
            showError("Houston, we have a problem! üõ∏ Let's try again!");
          });
      }

      function showError(message) {
        errorDiv.textContent = message;
        errorDiv.classList.remove("hidden");
        result.classList.add("hidden");
        loading.style.display = "none";
      }

      // Add event listeners for quiz buttons
      document
        .getElementById("start-quiz")
        .addEventListener("click", startQuizTimer);
      document
        .getElementById("submit-quiz")
        .addEventListener("click", submitQuizAnswer);

      // Start with the quiz instead of photo upload
      showQuiz();
    </script>
  </body>
</html>
